!function(e){"use strict";function t(){chrome.storage.sync.get(null,function(t){e.extend(!0,n,t),i()})}function i(){if(parseInt(n.disabled))return e("#grid_builder_toggle_button").remove(),e(".grid_builder").remove(),void 0;var t=e("#grid_builder_toggle_button");t.length?t.data("open")&&(r(),d()):(e("body").append('<div id="grid_builder_toggle_button">ON</div>'),e("#grid_builder_toggle_button").click(function(){e(this).data("open")?(r(),e(this).data("open",0)):(d(),e(this).data("open",1))}))}function r(){e(".grid_builder").remove(),e("#grid_builder_toggle_button").html("ON"),e("#grid_builder_toggle_button").removeClass("off")}function d(){if(e("#grid_builder_toggle_button")){e("#grid_builder_toggle_button").html("OFF"),e("#grid_builder_toggle_button").addClass("off");var t,i,r,d;if(parseInt(n.usemanual))d=n.manual;else for(var o in n)if(d=n[o],d.pageWidth+d.gutter<e("body").width())break;var g=e("html").height();e("*").each(function(){g=Math.max(g,e(this).offset().top+e(this).outerHeight())}),r=parseInt((g-d.topMargin)/d.lineHeight);var l=d.lineHeight,a=d.topMargin,u=d.columns,s=d.gutter;t=parseInt(d.pageWidth)>0?parseInt(d.pageWidth):e("body").width()-d.gutter,i=(t-d.gutter*(d.columns-1))/d.columns;for(var p=0;r>p;p++)e("body").append('<div class="grid_builder grid_horizontal" style="top: '+(p*l+a)+'px;"></div>');var _=parseInt((e("body").width()-t)/2);e("body").append('<div class="grid_builder grid_vertical first" style="left: '+parseInt(_)+'px;"></div>'),_+=i,e("body").append('<div class="grid_builder grid_vertical" style="left: '+parseInt(_)+'px;"></div>');for(var p=1;u>p;p++)_+=s,e("body").append('<div class="grid_builder grid_vertical" style="left: '+parseInt(_)+'px;"></div>'),_+=i,e("body").append('<div class="grid_builder grid_vertical" style="left: '+parseInt(_)+'px;"></div>')}}var n={bs_lg:{pageWidth:1140,columns:12,gutter:30,topMargin:0,lineHeight:24},bs_md:{pageWidth:940,columns:12,gutter:30,topMargin:0,lineHeight:24},bs_sm:{pageWidth:720,columns:12,gutter:30,topMargin:0,lineHeight:24},bs_xs:{pageWidth:0,columns:12,gutter:30,topMargin:0,lineHeight:24},manual:{pageWidth:1140,columns:12,gutter:30,topMargin:0,lineHeight:24},disabled:0,usemanual:0};chrome.runtime.onMessage.addListener(function(t){"grid_builder_refresh"===t.identifier&&chrome.storage.sync.get(null,function(t){e.extend(!0,n,t),i()})}),e(window).load(t),e(document).ready(t),e(window).resize(function(){e(".grid_builder").length&&(r(),d())})}(jQuery);