!function(e){"use strict";function t(){chrome.storage.sync.get(null,function(t){e.extend(!0,n,t),i()})}function i(){if(parseInt(n.disabled))return e("#grid_builder_toggle_button").remove(),e(".grid_builder").remove(),void 0;var t=e("#grid_builder_toggle_button");t.length?t.data("open")&&(r(),d()):(e("body").append('<div id="grid_builder_toggle_button">ON</div>'),e("#grid_builder_toggle_button").click(function(){e(this).data("open")?(r(),e(this).data("open",0)):(d(),e(this).data("open",1))}))}function r(){e(".grid_builder").remove(),e("#grid_builder_toggle_button").html("ON"),e("#grid_builder_toggle_button").removeClass("off")}function d(){if(e("#grid_builder_toggle_button")){e("#grid_builder_toggle_button").html("OFF"),e("#grid_builder_toggle_button").addClass("off");var t,i,r,d;if(parseInt(n.usemanual))d=n.manual;else for(var l in n)if(d=n[l],d.pageWidth+d.gutter<e("body").width())break;r=parseInt((e("html").height()-d.topMargin)/d.lineHeight);var g=d.lineHeight,o=d.topMargin,a=d.columns,u=d.gutter;t=parseInt(d.pageWidth)>0?parseInt(d.pageWidth):e("body").width()-d.gutter,i=(t-d.gutter*(d.columns-1))/d.columns;for(var s=0;r>s;s++)e("body").append('<div class="grid_builder grid_horizontal" style="top: '+(s*g+o)+'px;"></div>');var p=parseInt((e("body").width()-t)/2);e("body").append('<div class="grid_builder grid_vertical first" style="left: '+parseInt(p)+'px;"></div>'),p+=i,e("body").append('<div class="grid_builder grid_vertical" style="left: '+parseInt(p)+'px;"></div>');for(var s=1;a>s;s++)p+=u,e("body").append('<div class="grid_builder grid_vertical" style="left: '+parseInt(p)+'px;"></div>'),p+=i,e("body").append('<div class="grid_builder grid_vertical" style="left: '+parseInt(p)+'px;"></div>')}}var n={bs_lg:{pageWidth:1140,columns:12,gutter:30,topMargin:0,lineHeight:24},bs_md:{pageWidth:940,columns:12,gutter:30,topMargin:0,lineHeight:24},bs_sm:{pageWidth:720,columns:12,gutter:30,topMargin:0,lineHeight:24},bs_xs:{pageWidth:0,columns:12,gutter:30,topMargin:0,lineHeight:24},manual:{pageWidth:1140,columns:12,gutter:30,topMargin:0,lineHeight:24},disabled:0,usemanual:0};chrome.runtime.onMessage.addListener(function(t){"grid_builder_refresh"===t.identifier&&chrome.storage.sync.get(null,function(t){e.extend(!0,n,t),i()})}),e(window).load(t),e(document).ready(t),e(window).resize(function(){e(".grid_builder").length&&(r(),d())})}(jQuery);